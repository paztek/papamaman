var app = angular.module('papamaman', ['ngRoute', 'ngMessages', 'Satellizer']);

// Configuration variables
app.constant('settings', {
    'FACEBOOK_APP_ID': <%= ENV['FACEBOOK_APP_ID'] %>
});

// Configuration
app.config(function($authProvider, $routeProvider, settings) {

    // Authentication
    $authProvider
        .facebook({
            clientId: settings['FACEBOOK_APP_ID'],
            url: '/users/auth/facebook'
        });
    $authProvider.loginUrl = '/users/sign_in';
    $authProvider.signupUrl = '/users.json';

    // Routing
    $routeProvider
            .when('/', {
                controller: 'HomeCtrl',
                templateUrl: 'views/home/index.html'
            })
            .when('/login', {
                controller: 'LoginCtrl',
                templateUrl: 'views/auth/login.html'
            })
            .when('/signup', {
                controller: 'SignupCtrl',
                templateUrl: 'views/auth/signup.html'
            })
            .when('/logout', {
                controller: 'LogoutCtrl',
                templateUrl: null
            })
            .when('/profile', {
                templateUrl: 'views/users/profile.html',
                controller: 'ProfileCtrl',
                protected: true
            })
            .otherwise({
                redirectTo: '/'
            });
    ;
});

